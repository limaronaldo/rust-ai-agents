# Cloudflare Workers configuration for rust-ai-agents
# Copy this to wrangler.toml and customize for your deployment

name = "ai-agent-worker"
main = "build/worker/shim.mjs"
compatibility_date = "2024-01-01"

# Build configuration for Rust WASM
[build]
command = "cargo install -q worker-build && worker-build --release"

# KV Namespaces for conversation persistence
[[kv_namespaces]]
binding = "CONVERSATIONS"
id = "your-kv-namespace-id"
preview_id = "your-preview-kv-namespace-id"

# Secrets (configure via `wrangler secret put`)
# - OPENAI_API_KEY
# - ANTHROPIC_API_KEY
# - OPENROUTER_API_KEY

# Environment variables
[vars]
ENVIRONMENT = "production"
DEFAULT_MODEL = "claude-3-5-sonnet-20241022"
DEFAULT_PROVIDER = "anthropic"

# Development environment
[env.dev]
name = "ai-agent-worker-dev"
[env.dev.vars]
ENVIRONMENT = "development"

# Staging environment
[env.staging]
name = "ai-agent-worker-staging"
[env.staging.vars]
ENVIRONMENT = "staging"

# Route configuration (optional)
# routes = [
#   { pattern = "api.example.com/chat/*", zone_name = "example.com" }
# ]

# Durable Objects (for stateful agents - optional)
# [[durable_objects.bindings]]
# name = "AGENT_SESSIONS"
# class_name = "AgentSession"
#
# [[migrations]]
# tag = "v1"
# new_classes = ["AgentSession"]
